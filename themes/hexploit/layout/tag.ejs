<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= config.title %> - Tag: <%= page.tag %></title>
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon.svg">
    <link rel="apple-touch-icon" href="/img/favicon.svg">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/tailwind.css">
    <link rel="stylesheet" href="/css/hacker.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="bg-transparent">
    <div class="bg-image"></div>
    <canvas id="matrix" class="matrix-canvas"></canvas>
    
    <!-- Sticky Header (same as index) -->
    <div class="sticky top-0 z-50">
        <%- partial('_partial/header') %>
    </div>

    <main class="container mx-auto px-4 py-8">
        <!-- Tag Title -->
        <div class="tag-archive-header">
            <h1 class="text-4xl text-hacker-color1 font-bold font-dos mb-2">
                <i class="fas fa-tag mr-3"></i><%= page.tag %>
            </h1>
            <p class="text-hacker-color3 text-lg mb-6">
                <%= page.posts.length %> post<%= page.posts.length !== 1 ? 's' : '' %> tagged
            </p>
            <hr class="border-t-2 border-hacker-color1 border-dashed opacity-50 mb-8">
        </div>

        <!-- Blog Cards (same as index) -->
        <div class="w-full space-y-8">
            <% page.posts.forEach(function(post) { %>
                <div class="glass-card group">
                    <div class="card-image">
                        <img src="/img/cyber-bg.jpg" alt="Post Thumbnail">
                    </div>
                    <div class="card-content">
                        <a href="<%= url_for(post.path) %>" class="block space-y-4">
                            <h2 class="post-title text-hacker-color1 group-hover:text-white font-bold text-2xl">
                                <%= post.title %>
                            </h2>
                            <p class="post-meta text-hacker-color3 text-sm group-hover:text-white">
                                <%= date(post.date, 'YYYY-MM-DD') %>
                            </p>
                            <p class="post-excerpt text-hacker-color3 group-hover:text-white">
                                <%= (post.excerpt || post.content) ? strip_html(post.excerpt || post.content).slice(0, 300) : '' %>...
                            </p>
                        </a>
                    </div>
                </div>
            <% }); %>
        </div>

        <!-- Back to Tags Link -->
        <div class="text-center mt-12">
            <a href="/tags" class="tag-bubble">
                <i class="fas fa-arrow-left mr-2"></i>
                <span class="tag-name">Back to All Tags</span>
            </a>
        </div>
    </main>

    <script src="/js/menu.js"></script>
    <script src="/js/matrix.js"></script>
    <%- partial('_partial/footer') %>
</body>

</html>
