<%# OPERATION BRIEF - Blog Post Card Component %>
<%# Required post front-matter: author, risk, summary, vectors, thumbnail %>
<%
  var postAuthor = post.author || config.author || 'Unknown';
  var postRisk = post.risk || 'MEDIUM';
  var postSummary = post.summary || (post.excerpt ? strip_html(post.excerpt).slice(0, 120) : strip_html(post.content).slice(0, 120));
  var postVectors = post.vectors || post.tags || [];
  var postThumbnail = post.thumbnail || '/img/cyber-bg.jpg';
  var riskClass = 'risk-' + postRisk.toLowerCase();
%>

<article class="op-brief-card">
  <!-- Thumbnail Image -->
  <div class="op-brief-thumbnail">
    <a href="<%= url_for(post.path) %>">
      <img src="<%= postThumbnail %>" alt="<%= post.title %>">
      <div class="thumbnail-overlay"></div>
    </a>
  </div>

  <div class="op-brief-header">
    <span class="op-brief-label">◈ OPERATION BRIEF</span>
    <!-- RISK BADGE DISABLED - Remove this comment block to re-enable
    <span class="op-brief-risk <%= riskClass %>">[<%= postRisk.toUpperCase() %>]</span>
    -->
  </div>
  
  <div class="op-brief-body">
    <h2 class="op-brief-title">
      <a href="<%= url_for(post.path) %>"><%= post.title %></a>
    </h2>
    
    <div class="op-brief-meta">
      <span class="op-brief-author">
        <i class="fas fa-user-secret"></i> <%= postAuthor %>
      </span>
      <span class="op-brief-date">
        <i class="fas fa-calendar-alt"></i> <%= date(post.date, 'YYYY-MM-DD') %>
      </span>
    </div>
    
    <p class="op-brief-summary"><%= postSummary %>...</p>
    
    <div class="op-brief-vectors">
      <span class="vectors-label">Attack Vectors:</span>
      <% if (postVectors.length) { %>
        <% postVectors.forEach(function(vector) { %>
          <% var tagName = vector.name || vector; %>
          <span class="vector-tag"><%= tagName %></span>
        <% }); %>
      <% } else { %>
        <span class="vector-tag">Unclassified</span>
      <% } %>
    </div>
  </div>
  
  <div class="op-brief-footer">
    <a href="<%= url_for(post.path) %>" class="op-brief-cta">
      <span class="cta-icon">▶</span> View Report
    </a>
  </div>
</article>
